{% extends "base.html" %}

{% block title %}{{ '√ödr≈æba' if language == 'cs' else 'Maintenance' }} - {{ t('app.name') }}{% endblock %}

{% block content %}
<h1 class="page-title">{{ '√ödr≈æba syst√©mu' if language == 'cs' else 'System Maintenance' }}</h1>

<div class="dashboard-grid">
    <div class="card">
        <h3>{{ 'Stav slu≈æeb' if language == 'cs' else 'Service Status' }}</h3>
        <table>
            <tr>
                <td>Watchdog Daemon</td>
                <td style="text-align: right;">
                    {% if services.get('watchdog') %}
                    <span class="status-badge status-online">‚óè {{ 'Bƒõ≈æ√≠' if language == 'cs' else 'Running' }}</span>
                    {% else %}
                    <span class="status-badge status-offline">‚óè {{ 'Zastaveno' if language == 'cs' else 'Stopped' }}</span>
                    {% endif %}
                </td>
            </tr>
            <tr>
                <td>Web Interface</td>
                <td style="text-align: right;">
                    {% if services.get('watchdog-web') %}
                    <span class="status-badge status-online">‚óè {{ 'Bƒõ≈æ√≠' if language == 'cs' else 'Running' }}</span>
                    {% else %}
                    <span class="status-badge status-offline">‚óè {{ 'Zastaveno' if language == 'cs' else 'Stopped' }}</span>
                    {% endif %}
                </td>
            </tr>
        </table>
        
        <div style="margin-top: 15px;">
            <form method="post" action="/maintenance/restart-services" style="display: inline;">
                <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">
                <button type="submit" class="btn btn-primary" 
                        onclick="return confirm('{{ 'Restartovat slu≈æby Watchdog?' if language == 'cs' else 'Restart Watchdog services?' }}')">
                    üîÑ {{ 'Restartovat slu≈æby' if language == 'cs' else 'Restart Services' }}
                </button>
            </form>
        </div>
    </div>
    
    <div class="card">
        <h3>{{ 'Syst√©mov√© informace' if language == 'cs' else 'System Information' }}</h3>
        <table>
            <tr>
                <td>{{ 'Uptime' if language == 'en' else 'Doba bƒõhu' }}</td>
                <td style="text-align: right;"><strong>{{ system_info.uptime }}</strong></td>
            </tr>
            <tr>
                <td>{{ 'Pamƒõ≈•' if language == 'cs' else 'Memory' }}</td>
                <td style="text-align: right;"><strong>{{ system_info.memory }}</strong></td>
            </tr>
            <tr>
                <td>{{ 'Disk' if language == 'en' else 'Disk' }}</td>
                <td style="text-align: right;"><strong>{{ system_info.disk }}</strong></td>
            </tr>
            <tr>
                <td>{{ 'Teplota CPU' if language == 'cs' else 'CPU Temperature' }}</td>
                <td style="text-align: right;"><strong>{{ system_info.temperature }}</strong></td>
            </tr>
        </table>
    </div>
</div>

<div class="section" style="margin-top: 20px;">
    <h3>‚ö†Ô∏è {{ 'Syst√©mov√© operace' if language == 'cs' else 'System Operations' }}</h3>
    <p style="color: var(--text-secondary); margin-bottom: 20px;">
        {{ 'Tyto operace ovlivn√≠ cel√Ω syst√©m. Pou≈æ√≠vejte opatrnƒõ.' if language == 'cs' else 'These operations affect the entire system. Use with caution.' }}
    </p>
    
    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
        <form method="post" action="/maintenance/restart-system">
            <input type="hidden" name="_csrf_token" value="{{ csrf_token() }}">
            <button type="submit" class="btn btn-restart" style="padding: 15px 25px;"
                    onclick="return confirm('{{ 'OPRAVDU restartovat cel√Ω syst√©m? V≈°echna p≈ôipojen√≠ budou p≈ôeru≈°ena.' if language == 'cs' else 'REALLY restart the entire system? All connections will be interrupted.' }}')">
                üîÅ {{ 'Restartovat syst√©m' if language == 'cs' else 'Restart System' }}
            </button>
        </form>
    </div>
</div>

<div class="section" style="margin-top: 20px;">
    <h3>{{ 'N√°povƒõda' if language == 'cs' else 'Help' }}</h3>
    <div style="font-size: 0.9em; color: var(--text-secondary);">
        <p><strong>{{ 'Restart slu≈æeb' if language == 'cs' else 'Restart Services' }}:</strong> 
        {{ 'Restartuje pouze Watchdog daemon a web rozhran√≠. Syst√©m z≈Østane bƒõ≈æet.' if language == 'cs' else 'Restarts only Watchdog daemon and web interface. System keeps running.' }}</p>
        
        <p style="margin-top: 10px;"><strong>{{ 'Restart syst√©mu' if language == 'cs' else 'Restart System' }}:</strong> 
        {{ 'Kompletn√≠ restart Raspberry Pi. Pou≈æijte p≈ôi probl√©mech s GPIO nebo po aktualizaci syst√©mu.' if language == 'cs' else 'Complete Raspberry Pi restart. Use for GPIO issues or after system updates.' }}</p>
    </div>
</div>
{% endblock %}
